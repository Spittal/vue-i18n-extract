{"version":3,"file":"vue-i18n-extract.modern.mjs","sources":["../src/config-file/vue-i18n-extract.config.ts","../src/config-file/index.ts","../src/types.ts","../src/create-report/vue-files.ts","../src/create-report/language-files.ts","../src/create-report/report.ts","../src/create-report/index.ts","../src/index.ts"],"sourcesContent":["export default {\r\n  // Options documented in vue-i18n-extract readme.\r\n  vueFiles: './src/**/*.?(js|vue)',\r\n  languageFiles: './lang/**/*.?(json|yaml|yml|js)',\r\n  exclude: [],\r\n  output: false,\r\n  add: false,\r\n  remove: false,\r\n  ci: false,\r\n  separator: '.',\r\n  noEmptyTranslation: ''\r\n};\r\n","import cac from 'cac';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport defaultConfig from './vue-i18n-extract.config';\r\n\r\nexport function initCommand(): void {\r\n  fs.writeFileSync(\r\n    path.resolve(process.cwd(), './vue-i18n-extract.config.js'),\r\n    `module.exports = ${JSON.stringify(defaultConfig, null, 2)}`,\r\n  );\r\n}\r\n\r\nexport function resolveConfig (parsedOptions?: { [k: string]: any }): Record<string, string> {\r\n  const argvOptions = parsedOptions === undefined\r\n    ? cac().parse(process.argv, { run: false }).options\r\n    : parsedOptions;\r\n\r\n  let options;\r\n\r\n  try {\r\n    const pathToConfigFile = path.resolve(process.cwd(), './vue-i18n-extract.config.js');\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    const configOptions = require(pathToConfigFile);\r\n\r\n    console.info(`\\nUsing config file found at ${pathToConfigFile}`);\r\n\r\n    options = {\r\n      ...configOptions,\r\n      ...argvOptions\r\n    };\r\n  } catch {\r\n    options = argvOptions;\r\n  }\r\n\r\n  options.exclude = Array.isArray(options.exclude) ? options.exclude : [options.exclude];\r\n\r\n  return options;\r\n}\r\n","export type ReportOptions = {\r\n  vueFiles: string;\r\n  languageFiles: string;\r\n  output?: string;\r\n  outputOrder?: OptionsOutputOrder;\r\n  exclude?: string[];\r\n  add?: boolean;\r\n  remove?: boolean;\r\n  ci?: boolean;\r\n  separator?: string;\r\n  noEmptyTranslation?: string;\r\n  detect?: DetectionType[];\r\n}\r\n\r\nexport enum DetectionType {\r\n  Missing = \"missing\",\r\n  Unused = \"unused\",\r\n  Dynamic = \"dynamic\"\r\n}\r\n\r\nexport type OptionsOutputOrder = 'append' | 'lexical';\r\n\r\nexport type SimpleFile = {\r\n  fileName: string;\r\n  path: string;\r\n  content: string;\r\n}\r\n\r\nexport type I18NItem = {\r\n  line?: number;\r\n  path: string;\r\n  file?: string;\r\n  language?: string;\r\n}\r\n\r\nexport type I18NItemWithBounding = I18NItem & {\r\n  previousCharacter: string;\r\n  nextCharacter: string;\r\n}\r\n\r\nexport type I18NLanguage = {\r\n  [language: string]: I18NItem[];\r\n}\r\n\r\nexport type I18NReport = {\r\n  missingKeys: I18NItem[];\r\n  unusedKeys: I18NItem[];\r\n  maybeDynamicKeys: I18NItem[];\r\n}\r\n","import { SimpleFile, I18NItemWithBounding } from '../types';\r\nimport isValidGlob from 'is-valid-glob';\r\nimport glob from 'glob';\r\nimport fs from 'fs';\r\n\r\nexport function readVueFiles (src: string): SimpleFile[] {\r\n  // Replace backslash path segments to make the path work with the glob package.\r\n  // https://github.com/Spittal/vue-i18n-extract/issues/159\r\n  const normalizedSrc = src.replace(/\\\\/g, '/');\r\n  if (!isValidGlob(normalizedSrc)) {\r\n    throw new Error(`vueFiles isn't a valid glob pattern.`);\r\n  }\r\n\r\n  const targetFiles = glob.sync(normalizedSrc);\r\n\r\n  if (targetFiles.length === 0) {\r\n    throw new Error('vueFiles glob has no files.');\r\n  }\r\n\r\n  return targetFiles.map((f) => {\r\n    const fileName = f.replace(process.cwd(), '.');\r\n    return { fileName, path: f, content: fs.readFileSync(f, 'utf8') };\r\n  });\r\n}\r\n\r\nfunction* getMatches (file: SimpleFile, regExp: RegExp, captureGroup = 1): IterableIterator<I18NItemWithBounding> {\r\n  while (true) {\r\n    const match = regExp.exec(file.content);\r\n    if (match === null) {\r\n      break;\r\n    }\r\n    const path = match[captureGroup];\r\n\r\n    const pathAtIndex = file.content.indexOf(path);\r\n    const previousCharacter = file.content.charAt(pathAtIndex - 1);\r\n    const nextCharacter = file.content.charAt(pathAtIndex + path.length);\r\n\r\n    const line = (file.content.substring(0, match.index).match(/\\n/g) || []).length + 1;\r\n    yield {\r\n      path,\r\n      previousCharacter,\r\n      nextCharacter,\r\n      file: file.fileName,\r\n      line,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Extracts translation keys from methods such as `$t` and `$tc`.\r\n *\r\n * - **regexp pattern**: (?:[$\\s.:\"'`+\\(\\[\\{]t[cm]?)\\(\r\n *\r\n *   **description**: Matches the sequence t(, tc( or tm(, optionally with either “$”, SPACE, “.”, “:”, “\"”, “'”,\r\n *   “`”, \"+\", \"(\", \"[\" or \"{\" in front of it.\r\n *\r\n * - **regexp pattern**: ([\"'`])\r\n *\r\n *   **description**: 1. capturing group. Matches either “\"”, “'”, or “`”.\r\n *\r\n * - **regexp pattern**: ((?:[^\\\\]|\\\\.)*?)\r\n *\r\n *   **description**: 2. capturing group. Matches anything except a backslash\r\n *   *or* matches any backslash followed by any character (e.g. “\\\"”, “\\`”, “\\t”, etc.)\r\n *\r\n * - **regexp pattern**: \\1\r\n *\r\n *   **description**: matches whatever was matched by capturing group 1 (e.g. the starting string character)\r\n *\r\n * @param file a file object\r\n * @returns a list of translation keys found in `file`.\r\n */\r\n function extractMethodMatches (file: SimpleFile): I18NItemWithBounding[] {\r\n  const methodRegExp = /(?:[$\\s.:\"'`+\\(\\[\\{]t[cm]?)\\(\\s*?([\"'`])((?:[^\\\\]|\\\\.)*?)\\1/g;\r\n  return [ ...getMatches(file, methodRegExp, 2) ];\r\n}\r\n\r\nfunction extractComponentMatches (file: SimpleFile): I18NItemWithBounding[] {\r\n  const componentRegExp = /(?:(?:<|h\\()(?:i18n|Translation))(?:.|\\n)*?(?:\\s(?:(?:key)?)path(?:=|: )(\"|'))((?:[^\\\\]|\\\\.)*?)\\1/gi;\r\n  return [ ...getMatches(file, componentRegExp, 2) ];\r\n}\r\n\r\nfunction extractDirectiveMatches (file: SimpleFile): I18NItemWithBounding[] {\r\n  const directiveRegExp = /\\bv-t(?:\\.[\\w-]+)?=\"'((?:[^\\\\]|\\\\.)*?)'\"/g;\r\n  return [ ...getMatches(file, directiveRegExp) ];\r\n}\r\n\r\nexport function extractI18NItemsFromVueFiles (sourceFiles: SimpleFile[]): I18NItemWithBounding[] {\r\n  return sourceFiles.reduce((accumulator, file) => {\r\n    const methodMatches = extractMethodMatches(file);\r\n    const componentMatches = extractComponentMatches(file);\r\n    const directiveMatches = extractDirectiveMatches(file);\r\n    return [\r\n      ...accumulator,\r\n      ...methodMatches,\r\n      ...componentMatches,\r\n      ...directiveMatches,\r\n    ];\r\n  }, [] as I18NItemWithBounding[]);\r\n}\r\n\r\n// This is a convenience function for users implementing in their own projects, and isn't used internally\r\nexport function parseVueFiles (vueFiles: string): I18NItemWithBounding[] {\r\n  return extractI18NItemsFromVueFiles(readVueFiles(vueFiles));\r\n}\r\n","import path from 'path';\r\nimport fs from 'fs';\r\nimport glob from 'glob';\r\nimport Dot from 'dot-object';\r\nimport yaml from 'js-yaml';\r\nimport isValidGlob from 'is-valid-glob';\r\nimport { SimpleFile, I18NLanguage, I18NItem, OptionsOutputOrder } from '../types';\r\n\r\nexport function readLanguageFiles (src: string): SimpleFile[] {\r\n  // Replace backslash path segments to make the path work with the glob package.\r\n  // https://github.com/Spittal/vue-i18n-extract/issues/159\r\n  const normalizedSrc = src.replace(/\\\\/g, '/');\r\n  if (!isValidGlob(normalizedSrc)) {\r\n    throw new Error(`languageFiles isn't a valid glob pattern.`);\r\n  }\r\n\r\n  const targetFiles = glob.sync(normalizedSrc);\r\n\r\n  if (targetFiles.length === 0) {\r\n    throw new Error('languageFiles glob has no files.');\r\n  }\r\n\r\n  return targetFiles.map(f => {\r\n    const langPath = path.resolve(process.cwd(), f);\r\n\r\n    const extension = langPath.substring(langPath.lastIndexOf('.')).toLowerCase();\r\n    const isJSON = extension === '.json';\r\n    const isYAML = extension === '.yaml' || extension === '.yml';\r\n\r\n    let langObj;\r\n    const languageFileContent = fs.readFileSync(langPath, 'utf8');\r\n    if (isJSON) {\r\n      langObj = JSON.parse(languageFileContent);\r\n    } else if (isYAML) {\r\n      langObj = yaml.load(languageFileContent);\r\n    } else {\r\n      langObj = eval(languageFileContent);\r\n    }\r\n\r\n    const fileName = f.replace(process.cwd(), '.');\r\n    // Persist the final new line character of a file.\r\n    const suffix = languageFileContent.endsWith('\\n') ? '\\n' : '';\r\n\r\n    return { path: f, fileName, content: JSON.stringify(langObj) + suffix };\r\n  });\r\n}\r\n\r\nexport function extractI18NLanguageFromLanguageFiles (languageFiles: SimpleFile[], dot: DotObject.Dot = Dot): I18NLanguage {\r\n  return languageFiles.reduce((accumulator, file) => {\r\n    const language = file.fileName.substring(file.fileName.lastIndexOf('/') + 1, file.fileName.lastIndexOf('.'));\r\n\r\n    if (!accumulator[language]) {\r\n      accumulator[language] = [];\r\n    }\r\n\r\n    const flattenedObject = dot.dot(JSON.parse(file.content));\r\n    Object.keys(flattenedObject).forEach((key) => {\r\n      accumulator[language].push({\r\n        path: key,\r\n        file: file.fileName,\r\n      });\r\n    });\r\n\r\n    return accumulator;\r\n  }, {});\r\n}\r\n\r\nexport function writeMissingToLanguageFiles (parsedLanguageFiles: SimpleFile[], missingKeys: I18NItem[], dot: DotObject.Dot = Dot, noEmptyTranslation = '', outputOrder: OptionsOutputOrder = 'append'): void {\r\n  parsedLanguageFiles.forEach(languageFile => {\r\n    const languageFileContent = JSON.parse(languageFile.content);\r\n\r\n    missingKeys.forEach(item => {\r\n      if (item.language && languageFile.fileName.includes(item.language) || !item.language) {\r\n        const addDefaultTranslation = (noEmptyTranslation) && ((noEmptyTranslation === '*') || (noEmptyTranslation === item.language));\r\n        dot.str(item.path, addDefaultTranslation ? item.path : '', languageFileContent);\r\n      }\r\n    });\r\n\r\n    let sortedLanguageFileContent;\r\n    if (outputOrder === 'lexical') {\r\n      const languageFileContentEntries = Object.entries(languageFileContent)\r\n      languageFileContentEntries.sort(([pathA], [pathB]) => pathA.localeCompare(pathB));\r\n      sortedLanguageFileContent = Object.fromEntries(languageFileContentEntries);\r\n    } else {\r\n      sortedLanguageFileContent = languageFileContent;\r\n    }\r\n\r\n    writeLanguageFile(languageFile, sortedLanguageFileContent);\r\n  });\r\n}\r\n\r\nexport function removeUnusedFromLanguageFiles (parsedLanguageFiles: SimpleFile[], unusedKeys: I18NItem[], dot: DotObject.Dot = Dot): void {\r\n  parsedLanguageFiles.forEach(languageFile => {\r\n    const languageFileContent = JSON.parse(languageFile.content);\r\n\r\n    unusedKeys.forEach(item => {\r\n      if (item.language && languageFile.fileName.includes(item.language)) {\r\n        dot.delete(item.path, languageFileContent);\r\n      }\r\n    });\r\n\r\n    writeLanguageFile(languageFile, languageFileContent);\r\n  });\r\n}\r\n\r\nfunction writeLanguageFile (languageFile: SimpleFile, newLanguageFileContent: any) {\r\n  const fileExtension = languageFile.fileName.substring(languageFile.fileName.lastIndexOf('.') + 1);\r\n  const filePath = languageFile.path;\r\n\r\n  // Persist the final new line character of a file.\r\n  const suffix = languageFile.content.endsWith('\\n') ? '\\n' : '';\r\n  const stringifiedContent = JSON.stringify(newLanguageFileContent, null, 2) + suffix;\r\n\r\n  if (fileExtension === 'json') {\r\n    fs.writeFileSync(filePath, stringifiedContent);\r\n  } else if (fileExtension === 'js') {\r\n    const jsFile = `module.exports = ${stringifiedContent}; \\n`;\r\n    fs.writeFileSync(filePath, jsFile);\r\n  } else if (fileExtension === 'yaml' || fileExtension === 'yml') {\r\n    const yamlFile = yaml.dump(newLanguageFileContent) + suffix;\r\n    fs.writeFileSync(filePath, yamlFile);\r\n  } else {\r\n    throw new Error(`Language filetype of ${fileExtension} not supported.`)\r\n  }\r\n}\r\n\r\n// This is a convenience function for users implementing in their own projects, and isn't used internally\r\nexport function parselanguageFiles (languageFiles: string, dot: DotObject.Dot = Dot): I18NLanguage {\r\n  return extractI18NLanguageFromLanguageFiles(readLanguageFiles(languageFiles), dot);\r\n}\r\n","import fs from 'fs';\r\nimport { DetectionType, I18NItem, I18NItemWithBounding, I18NLanguage, I18NReport, OptionsOutputOrder } from '../types';\r\n\r\nfunction stripBounding (item: I18NItemWithBounding): I18NItem {\r\n  return {\r\n    path: item.path,\r\n    file: item.file,\r\n    line: item.line,\r\n  }\r\n}\r\n\r\nfunction mightBeDynamic (item: I18NItemWithBounding): boolean {\r\n  return item.path.includes('${') && !!item.previousCharacter.match(/`/g) && !!item.nextCharacter.match(/`/g);\r\n}\r\n\r\n// Looping through the arays multiple times might not be the most effecient, but it's the easiest to read and debug. Which at this scale is an accepted trade-off.\r\nexport function extractI18NReport (vueItems: I18NItemWithBounding[], languageFiles: I18NLanguage, detect: DetectionType[], outputOrder: OptionsOutputOrder = 'append'): I18NReport {\r\n  const missingKeys: I18NItem[] = [];\r\n  const unusedKeys: I18NItem[] = [];\r\n  const maybeDynamicKeys: I18NItem[] = [];\r\n\r\n  if (detect.includes(DetectionType.Dynamic)) {\r\n   maybeDynamicKeys. push( ...vueItems\r\n    .filter(vueItem => mightBeDynamic(vueItem))\r\n    .map(vueItem => stripBounding(vueItem)));\r\n   }\r\n\r\n  Object.keys(languageFiles).forEach(language => {\r\n    const languageItems = languageFiles[language];\r\n\r\n    if (detect.includes(DetectionType.Missing)) {\r\n    const missingKeysInLanguage = vueItems\r\n      .filter(vueItem => !mightBeDynamic(vueItem))\r\n      .filter(vueItem => !languageItems.some(languageItem => vueItem.path === languageItem.path))\r\n      .map(vueItem => ({ ...stripBounding(vueItem), language }));\r\n\r\n    missingKeys.push(...missingKeysInLanguage);\r\n    }\r\n\r\n    if (detect.includes(DetectionType.Unused)) {\r\n    const unusedKeysInLanguage = languageItems\r\n      .filter(languageItem => !vueItems.some(vueItem => languageItem.path === vueItem.path || languageItem.path.startsWith(vueItem.path + '.')))\r\n      .map(languageItem => ({ ...languageItem, language }));\r\n\r\n    unusedKeys.push(...unusedKeysInLanguage);\r\n    }\r\n  });\r\n\r\n  if (outputOrder === 'lexical') {\r\n    missingKeys.sort((itemA, itemB) => itemA.path.localeCompare(itemB.path));\r\n    unusedKeys.sort((itemA, itemB) => itemA.path.localeCompare(itemB.path));\r\n  }\r\n\r\n  return {\r\n    missingKeys,\r\n    unusedKeys,\r\n    maybeDynamicKeys,\r\n  };\r\n}\r\n\r\nexport async function writeReportToFile (report: I18NReport, writePath: string): Promise<NodeJS.ErrnoException | void> {\r\n  const reportString = JSON.stringify(report);\r\n  return new Promise((resolve, reject) => {\r\n    fs.writeFile(\r\n      writePath,\r\n      reportString,\r\n      (err) => {\r\n        if (err) {\r\n          reject(err);\r\n          return;\r\n        }\r\n        resolve();\r\n      },\r\n    );\r\n  });\r\n}\r\n","import path from 'path';\r\nimport { ReportOptions, I18NReport, DetectionType } from '../types';\r\nimport { readVueFiles, extractI18NItemsFromVueFiles } from './vue-files';\r\nimport { readLanguageFiles, extractI18NLanguageFromLanguageFiles, removeUnusedFromLanguageFiles, writeMissingToLanguageFiles } from './language-files';\r\nimport { extractI18NReport,  writeReportToFile } from './report';\r\nimport Dot from 'dot-object';\r\n\r\nexport async function createI18NReport (options: ReportOptions): Promise<I18NReport> {\r\n  const {\r\n    vueFiles: vueFilesGlob,\r\n    languageFiles: languageFilesGlob,\r\n    output,\r\n    outputOrder = 'append',\r\n    add,\r\n    remove,\r\n    exclude = [],\r\n    ci,\r\n    separator,\r\n    noEmptyTranslation = '',\r\n    detect = [DetectionType.Missing, DetectionType.Unused, DetectionType.Dynamic]\r\n  } = options;\r\n\r\n  if (!vueFilesGlob) throw new Error('Required configuration vueFiles is missing.');\r\n  if (!languageFilesGlob) throw new Error('Required configuration languageFiles is missing.');\r\n\r\n  const issuesToDetect = Array.isArray(detect) ? detect : [detect];\r\n  const invalidDetectOptions = issuesToDetect.filter(item => !Object.values(DetectionType).includes(item));\r\n  if (invalidDetectOptions.length) {\r\n    throw new Error(`Invalid 'detect' value(s): ${invalidDetectOptions}`);\r\n  }\r\n\r\n  const dot = typeof separator === 'string' ? new Dot(separator) : Dot;\r\n  const vueFiles = readVueFiles(path.resolve(process.cwd(), vueFilesGlob));\r\n  const languageFiles = readLanguageFiles(path.resolve(process.cwd(), languageFilesGlob));\r\n\r\n  const I18NItems = extractI18NItemsFromVueFiles(vueFiles);\r\n  const I18NLanguage = extractI18NLanguageFromLanguageFiles(languageFiles, dot);\r\n\r\n  const report = extractI18NReport(I18NItems, I18NLanguage, issuesToDetect, outputOrder);\r\n\r\n  report.unusedKeys = report.unusedKeys.filter(key =>\r\n      !exclude.filter(excluded => key.path.startsWith(excluded)).length)\r\n\r\n  if (report.missingKeys.length) console.info('\\nMissing Keys'), console.table(report.missingKeys);\r\n  if (report.unusedKeys.length) console.info('\\nUnused Keys'), console.table(report.unusedKeys);\r\n  if (report.maybeDynamicKeys.length) console.warn('\\nSuspected Dynamic Keys Found\\nvue-i18n-extract does not compile Vue templates and therefore can not infer the correct key for the following keys.'), console.table(report.maybeDynamicKeys);\r\n\r\n  if (output) {\r\n    await writeReportToFile(report, path.resolve(process.cwd(), output));\r\n    console.info(`\\nThe report has been has been saved to ${output}`);\r\n  }\r\n\r\n  if (remove && report.unusedKeys.length) {\r\n    removeUnusedFromLanguageFiles(languageFiles, report.unusedKeys, dot);\r\n    console.info('\\nThe unused keys have been removed from your language files.');\r\n  }\r\n\r\n  if (add && report.missingKeys.length) {\r\n    writeMissingToLanguageFiles(languageFiles, report.missingKeys, dot, noEmptyTranslation, outputOrder);\r\n    console.info('\\nThe missing keys have been added to your language files.');\r\n  }\r\n\r\n  if (ci && report.missingKeys.length) {\r\n    throw new Error(`${report.missingKeys.length} missing keys found.`);\r\n  }\r\n\r\n  if (ci && report.unusedKeys.length) {\r\n    throw new Error(`${report.unusedKeys.length} unused keys found.`);\r\n  }\r\n\r\n  return report;\r\n}\r\n\r\nexport * from './vue-files';\r\nexport * from './language-files';\r\nexport * from './report';\r\n","export * from './config-file';\r\nexport * from './create-report';\r\nexport * from './types';\r\n\r\nprocess.on('uncaughtException', (err) => {\r\n  console.error('[vue-i18n-extract]', err);\r\n  process.exit(1);\r\n});\r\n\r\nprocess.on('unhandledRejection', (err) => {\r\n  console.error('[vue-i18n-extract]', err);\r\n  process.exit(1);\r\n});\r\n"],"names":["vueFiles","languageFiles","exclude","output","add","remove","ci","separator","noEmptyTranslation","initCommand","fs","writeFileSync","path","resolve","process","cwd","JSON","stringify","defaultConfig","resolveConfig","parsedOptions","argvOptions","undefined","cac","parse","argv","run","options","pathToConfigFile","configOptions","require","console","info","Array","isArray","DetectionType","readVueFiles","src","normalizedSrc","replace","isValidGlob","Error","targetFiles","glob","sync","length","map","f","fileName","content","readFileSync","getMatches","file","regExp","captureGroup","match","exec","pathAtIndex","indexOf","previousCharacter","charAt","nextCharacter","line","substring","index","extractMethodMatches","methodRegExp","extractComponentMatches","componentRegExp","extractDirectiveMatches","directiveRegExp","extractI18NItemsFromVueFiles","sourceFiles","reduce","accumulator","methodMatches","componentMatches","directiveMatches","parseVueFiles","readLanguageFiles","langPath","extension","lastIndexOf","toLowerCase","isJSON","isYAML","langObj","languageFileContent","yaml","load","eval","suffix","endsWith","extractI18NLanguageFromLanguageFiles","dot","Dot","language","flattenedObject","Object","keys","forEach","key","push","writeMissingToLanguageFiles","parsedLanguageFiles","missingKeys","outputOrder","languageFile","item","includes","addDefaultTranslation","str","sortedLanguageFileContent","languageFileContentEntries","entries","sort","pathA","pathB","localeCompare","fromEntries","writeLanguageFile","removeUnusedFromLanguageFiles","unusedKeys","delete","newLanguageFileContent","fileExtension","filePath","stringifiedContent","jsFile","yamlFile","dump","parselanguageFiles","stripBounding","mightBeDynamic","extractI18NReport","vueItems","detect","maybeDynamicKeys","Dynamic","filter","vueItem","languageItems","Missing","missingKeysInLanguage","some","languageItem","Unused","unusedKeysInLanguage","startsWith","itemA","itemB","writeReportToFile","report","writePath","reportString","Promise","reject","writeFile","err","createI18NReport","vueFilesGlob","languageFilesGlob","issuesToDetect","invalidDetectOptions","values","I18NItems","I18NLanguage","excluded","table","warn","on","error","exit"],"mappings":"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"}