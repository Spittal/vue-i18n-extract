!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path"),require("is-valid-glob"),require("glob"),require("fs"),require("dot-object"),require("js-yaml"),require("esm")):"function"==typeof define&&define.amd?define(["path","is-valid-glob","glob","fs","dot-object","js-yaml","esm"],t):(e=e||self).vueI18NExtract=t(e.path,e.isValidGlob,e.glob,e.fs,e.dot,e.yaml,e.esm)}(this,function(e,t,r,n,a,s,l){function*o(e,t,r){for(void 0===r&&(r=1);;){var n=t.exec(e.content);if(null===n)break;var a=(e.content.substring(0,n.index).match(/\n/g)||[]).length+1;yield{path:n[r],line:a,file:e.fileName}}}function i(a){if(!t(a))throw new Error("languageFiles isn't a valid glob pattern.");var l=r.sync(a);if(0===l.length)throw new Error("languageFiles glob has no files.");return l.map(t=>{var r=e.resolve(process.cwd(),t),a=r.substring(r.lastIndexOf(".")).toLowerCase(),l=".yaml"===a||".yml"===a?s.safeLoad(n.readFileSync(r,"utf8")):require(r),o=l.default?l.default:l;return{fileName:t.replace(process.cwd(),""),path:t,content:JSON.stringify(o)}})}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c;function f(s,l){var f=e.resolve(process.cwd(),s),d=e.resolve(process.cwd(),l);return function(e,t,r){void 0===r&&(r=c.All);var n=[],a=[];Object.keys(t).forEach(r=>{var s=t[r];e.forEach(e=>{var a=function(t){return t.path===e.path||t.path.startsWith(e.path+".")};t[r].some(a)||n.push(u({},e,{language:r})),s=s.filter(e=>!a(e))}),a.push(...s.map(e=>u({},e,{language:r})))});var s={};return r&c.Missing&&(s=Object.assign(s,{missingKeys:n})),r&c.Unused&&(s=Object.assign(s,{unusedKeys:a})),s}(function(e){if(!t(e))throw new Error("vueFiles isn't a valid glob pattern.");var a=r.sync(e);if(0===a.length)throw new Error("vueFiles glob has no files.");return a.map(e=>({fileName:e.replace(process.cwd(),""),path:e,content:n.readFileSync(e,"utf8")}))}(f).reduce((e,t)=>[...e,...function(e){return[...o(e,/(?:[$ .]tc?)\(\s*?(["'`])((?:[^\\]|\\.)*?)\1/g,2)]}(t),...function(e){return[...o(e,/(?:<i18n|<I18N)(?:.|\n)*?(?:[^:]path=("|'))(.*?)\1/g,2)]}(t),...function(e){return[...o(e,/v-t="'(.*?)'"/g)]}(t)],[]),i(d).reduce((e,t)=>{var r=t.fileName.substring(t.fileName.lastIndexOf("/")+1,t.fileName.lastIndexOf(".")),n=a.dot(JSON.parse(t.content)),s=Object.keys(n).map((e,r)=>({line:r,path:e,file:t.fileName}));return e[r]=s,e},{}))}return e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,require=l(module),function(e){e[e.None=0]="None",e[e.Missing=1]="Missing",e[e.Unused=2]="Unused",e[e.All=3]="All"}(c||(c={})),{createI18NReport:f,reportCommand:async function(t){var r,l,{vueFiles:o,languageFiles:u,output:c,add:d}=t,p=f(o,u);p.missingKeys&&console.table(p.missingKeys),p.unusedKeys&&console.table(p.unusedKeys),c&&(await async function(e,t){var r=JSON.stringify(e);return new Promise((e,a)=>{n.writeFile(t,r,t=>{t?a(t):e()})})}(p,e.resolve(process.cwd(),c)),console.log("The report has been has been saved to "+c)),d&&p.missingKeys&&p.missingKeys.length>0&&(r=e.resolve(process.cwd(),u),l=p.missingKeys,i(r).forEach(t=>{var r=JSON.parse(t.content);l.forEach(e=>{(e.language&&t.fileName.includes(e.language)||!e.language)&&a.str(e.path,"",r)});var o=t.fileName.substring(t.fileName.lastIndexOf(".")+1),i=e.resolve(process.cwd()+t.fileName),u=JSON.stringify(r,null,2);if("json"===o)n.writeFileSync(i,u);else if("js"===o)n.writeFileSync(i,"export default "+u+"; \n");else if("yaml"===o||"yml"===o){var c=s.safeDump(r);n.writeFileSync(i,c)}}),console.log("The missing keys have been added to your languages files"))}}});
//# sourceMappingURL=vue-i18n-extract.umd.js.map
